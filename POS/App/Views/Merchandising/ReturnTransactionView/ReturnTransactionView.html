<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>ReturnTransaction</title>
</head>
<body>
    <!-- Main page -->
    <div class="fragment returnTransactionView">
        <div data-bind="pivot: {}, resx: { ariaLabel: 'string_4454' }">
            <div data-bind="pivotItem: { headerResx: 'string_1236' }">
                <!-- Main content -->
                <div class="standardGrid salesOrderLinesGrid height100Percent">
                    <div id="salesOrderLinesView"
                        data-bind="listView: {
                            itemDataSource: viewModel.salesLinesForDisplay,
                            selectionMode: 'multi',
                            tapBehavior: 'toggleSelect',
                            selectionchanged: { eventHandlerCallBack: salesOrderLineListSelectionChangedEventHandler },
                            displayMode: Commerce.Controls.ListView.DisplayMode.AlwaysExpandedWithCheckbox,
                            rowExpandedTemplateId: 'SalesLineColspan',
                            columns: salesLineColumns,
                            ariaLabelResx: 'string_1249',
                            },
                            axBubbleAttr: 'returnTransactionView_salesOrderLinesView'">
                            <!-- List of sales line for an order -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom app bar -->
        <div id="commandAppBar" data-bind="appBar: { extensionCommands: viewModel.extensionCommandViewModels }, axBubbleAttr: 'returnTransactionView_commandAppBar'">

            <button data-bind="appBarCommand: {
                    id: 'searchSalesTransactions',
                    extraClass: 'iconSearch',
                    onclick: viewModel.getReceiptIdAndSearchSalesTransactionsAsync.bind(viewModel),
                    labelResx: 'string_10084',
                    visible: !viewModel.hasSelectedSalesOrder()
                },
                axBubbleAttr: 'returnTransactionView_searchButton'"></button><!-- Search Receipt -->

            <button data-bind="appBarCommand: {
                    id: 'searchProductsButton',
                    extraClass: 'iconSearch',
                    onclick: viewModel.searchProductsAndSelectSalesLine.bind(viewModel),
                    labelResx: 'string_1259',
                    visible: viewModel.hasSelectedSalesOrder
                },
                axBubbleAttr: 'returnTransactionView_searchProductsButton'"></button><!-- Search Products -->

            <button data-bind="appBarCommand: {
                    extraClass: 'iconClearSelection',
                    id: 'clearSelectionButton',
                    labelResx: 'string_1248',
                    enabled: viewModel.hasSelectedSalesLines,
                    onclick: deselectAll
                },
                axBubbleAttr: 'returnTransactionView_clearAllButton'"></button> <!--Clear Selection-->

            <button data-bind="appBarCommand: {
                    extraClass: 'iconSelectAll',
                    id: 'selectAll',
                    labelResx: 'string_1213',
                    enabled: viewModel.hasSalesLinesForDisplay,
                    onclick: selectAll
                },
                axBubbleAttr: 'returnTransactionView_selectAllButton'"></button> <!--Select All-->

            <button data-bind="appBarCommand: {
                    extraClass: 'iconProductReturn',
                    id: 'return',
                    labelResx: 'string_1214',
                    enabled: viewModel.areSelectedItemsReturnable,
                    onclick: returnSalesOrderLines
                },
                axBubbleAttr: 'returnTransactionView_returnButton'"></button> <!--Return-->

        </div>
    </div>
</body>
</html>